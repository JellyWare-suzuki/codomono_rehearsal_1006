<!DOCTYPE html>
<html lang="ja">
<head>
  <meta charset="UTF-8">
  <title>空飛ぶ犬の理科RPG</title>
  <style>
    body {
      margin: 0;
      overflow: hidden;
      background: linear-gradient(to top, #87cefa, #ffffff);
      font-family: sans-serif;
    }

    #gameArea {
      position: relative;
      width: 100vw;
      height: 100vh;
      overflow: hidden;
    }

    #dog {
      position: absolute;
      bottom: 20px;
      left: 50px;
      width: 80px;
      transition: transform 0.3s;
    }

    .enemy {
      position: absolute;
      width: 60px;
      bottom: 20px;
    }

    #boss {
      position: absolute;
      right: 100px;
      bottom: 20px;
      width: 80px;
      display: none;
    }

    #message {
      position: absolute;
      top: 20px;
      left: 50%;
      transform: translateX(-50%);
      background: rgba(255,255,255,0.8);
      padding: 10px 20px;
      border-radius: 10px;
      font-size: 18px;
      z-index: 10;
    }

    .firework {
      position: absolute;
      width: 10px;
      height: 10px;
      border-radius: 50%;
      background: red;
      animation: explode 1s ease-out forwards;
    }

    @keyframes explode {
      0% {
        transform: scale(1);
        opacity: 1;
      }
      100% {
        transform: scale(5);
        opacity: 0;
      }
    }

    .flying {
      animation: flyingAnim 1s infinite alternate ease-in-out;
    }

    @keyframes flyingAnim {
      from { transform: translateY(0); }
      to { transform: translateY(-20px); }
    }
  </style>
</head>
<body>
  <div id="gameArea">
    <img id="dog" src="https://em-content.zobj.net/source/joypixels/354/dog-face_1f436.png" alt="犬">
    <img id="boss" src="https://em-content.zobj.net/source/joypixels/354/microscope_1f52c.png" alt="理科ボス">
    <div id="message">空飛ぶ犬🐶で理科の世界を冒険しよう！</div>
  </div>

  <script>
    const dog = document.getElementById("dog");
    const boss = document.getElementById("boss");
    const message = document.getElementById("message");
    const gameArea = document.getElementById("gameArea");

    let x = 50;
    let flying = true;
    dog.classList.add("flying");

    // ステージ上の理科モンスター
    const enemies = [
      { src: "https://em-content.zobj.net/source/joypixels/354/dna_1f9ec.png", left: 300 },
      { src: "https://em-content.zobj.net/source/joypixels/354/test-tube_1f9ea.png", left: 600 }
    ];

    enemies.forEach(e => {
      const el = document.createElement("img");
      el.src = e.src;
      el.className = "enemy";
      el.style.left = e.left + "px";
      gameArea.appendChild(el);
    });

    function moveDog() {
      if (x < window.innerWidth - 150) {
        x += 5;
        dog.style.left = x + "px";

        // 敵との衝突処理
        const hit = enemies.find(e => Math.abs(x - e.left) < 30);
        if (hit) {
          message.textContent = "敵を倒した！💥";
          enemies.splice(enemies.indexOf(hit), 1);
        }

        // ボス出現
        if (x > 700 && boss.style.display === "none") {
          boss.style.display = "block";
          message.textContent = "理科ボス登場！🔬";
        }

        // ボス撃破＆花火
        if (x > 900 && boss.style.display === "block") {
          boss.style.display = "none";
          message.textContent = "ボス撃破！🎆 花火だ！";

          launchFireworks();
        }

        requestAnimationFrame(moveDog);
      } else {
        message.textContent = "冒険クリア！✨";
      }
    }

    function launchFireworks() {
      for (let i = 0; i < 20; i++) {
        const fw = document.createElement("div");
        fw.className = "firework";
        fw.style.left = Math.random() * window.innerWidth + "px";
        fw.style.top = Math.random() * (window.innerHeight / 2) + "px";
        fw.style.background = `hsl(${Math.random()*360}, 100%, 60%)`;
        gameArea.appendChild(fw);

        setTimeout(() => fw.remove(), 1000);
      }
    }

    // スタート
    message.textContent = "クリックで冒険開始！🐶";
    gameArea.addEventListener("click", () => {
      message.textContent = "出発進行！✈️";
      moveDog();
    });
  </script>
</body>
</html>
